{% extends "base.html" %}
{% block title %}Videos{% endblock %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">Movies</h2>
    <form class="d-flex" method="get">
      <input
        class="form-control me-2"
        name="q"
        placeholder="Search movies"
        value="{{ query }}"
      />
      <button class="btn btn-outline-primary" type="submit">Search</button>
    </form>
  </div>

  {% if selected %}
    <div class="mb-4">
      <div class="ratio ratio-16x9 mb-2">
        <iframe
          src="{{ selected.embed_url }}"
          title="{{ selected.title }}"
          allowfullscreen
          frameborder="0"
        ></iframe>
      </div>
      <h4 class="mb-1">{{ selected.title }}</h4>
      <p class="text-muted mb-0">{{ selected.description }}</p>
    </div>
  {% endif %}

  {% if results %}
    <h5 class="mb-3">Browse catalog</h5>
    <div class="row row-cols-2 row-cols-md-4 row-cols-lg-5 g-3">
      {% for v in results %}
        <div class="col">
          <a
            href="{{ url_for('videos_page', watch=v.id, q=query) }}"
            class="text-decoration-none"
          >
            <div class="card bg-dark text-white border-0 h-100 shadow-sm">
              <img
                src="{{ v.thumbnail }}"
                class="card-img-top"
                alt="{{ v.title }}"
              />
              <div class="card-body p-2">
                <h6 class="card-title mb-0 text-truncate">{{ v.title }}</h6>
              </div>
            </div>
          </a>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="text-muted">No movies found. Try searching for a different title.</p>
  {% endif %}
{% endblock %}


